[gd_scene load_steps=17 format=3 uid="uid://dtb34pld2df8t"]

[ext_resource type="Texture2D" uid="uid://bu3t1u42qw38y" path="res://Sprites/Test_Tile_Sprite_Holders/White_Square.png" id="1_rix20"]
[ext_resource type="Script" path="res://Combat/ComatTransition.gd" id="1_x4r3f"]
[ext_resource type="Texture2D" uid="uid://tlcfith2mkdc" path="res://Sprites/Test_Tile_Sprite_Holders/Black_Square.png" id="2_ix46s"]
[ext_resource type="Script" path="res://Combat/Enemy.gd" id="2_u72vy"]
[ext_resource type="Script" path="res://Combat/PlayerCombat.gd" id="4_jgo8f"]
[ext_resource type="Script" path="res://Combat/UI_Combat.gd" id="5_w577b"]
[ext_resource type="Texture2D" uid="uid://cdblvdggggc41" path="res://Sprites/blacksquare.png" id="6_6iyy6"]
[ext_resource type="Script" path="res://Combat/PlayerAttackPhase.gd" id="8_frq5w"]
[ext_resource type="Script" path="res://Combat/AimingArea2D.gd" id="9_qufre"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kdfxg"]
size = Vector2(131, 131)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_j1vcl"]
texture = ExtResource("6_6iyy6")
texture_region_size = Vector2i(128, 128)
0:0/0 = 0

[sub_resource type="TileSet" id="TileSet_v2ckg"]
tile_size = Vector2i(128, 128)
sources/0 = SubResource("TileSetAtlasSource_j1vcl")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_36stq"]
texture = ExtResource("1_rix20")
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0
5:0/0 = 0
6:0/0 = 0
7:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
4:1/0 = 0
5:1/0 = 0
6:1/0 = 0
7:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
4:2/0 = 0
5:2/0 = 0
6:2/0 = 0
7:2/0 = 0
0:3/0 = 0
1:3/0 = 0
2:3/0 = 0
3:3/0 = 0
4:3/0 = 0
5:3/0 = 0
6:3/0 = 0
7:3/0 = 0
0:4/0 = 0
1:4/0 = 0
2:4/0 = 0
3:4/0 = 0
4:4/0 = 0
5:4/0 = 0
6:4/0 = 0
7:4/0 = 0
0:5/0 = 0
1:5/0 = 0
2:5/0 = 0
3:5/0 = 0
4:5/0 = 0
5:5/0 = 0
6:5/0 = 0
7:5/0 = 0
0:6/0 = 0
1:6/0 = 0
2:6/0 = 0
3:6/0 = 0
4:6/0 = 0
5:6/0 = 0
6:6/0 = 0
7:6/0 = 0
0:7/0 = 0
1:7/0 = 0
2:7/0 = 0
3:7/0 = 0
4:7/0 = 0
5:7/0 = 0
6:7/0 = 0
7:7/0 = 0

[sub_resource type="TileSet" id="TileSet_tyswo"]
sources/0 = SubResource("TileSetAtlasSource_36stq")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_y4u1u"]
size = Vector2(129, 127)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ueekk"]
size = Vector2(126, 131)

[node name="AttackScene" type="Node2D"]
script = ExtResource("1_x4r3f")

[node name="Enemy" type="Node2D" parent="."]
position = Vector2(0, -270)
script = ExtResource("2_u72vy")

[node name="Sprite2D" type="Sprite2D" parent="Enemy"]
texture = ExtResource("2_ix46s")

[node name="AttackData" type="Node2D" parent="Enemy"]

[node name="RigidBody2D" type="RigidBody2D" parent="Enemy" groups=["Head"]]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Enemy/RigidBody2D"]
position = Vector2(1.5, 2.5)
shape = SubResource("RectangleShape2D_kdfxg")

[node name="UI" type="Node2D" parent="."]
position = Vector2(-84, 172)
script = ExtResource("5_w577b")

[node name="Display" type="TileMap" parent="UI"]
visible = false
position = Vector2(148, 15)
rotation = 1.57079
tile_set = SubResource("TileSet_v2ckg")
format = 2
layer_0/tile_data = PackedInt32Array(131069, 0, 0, 196605, 0, 0, 262141, 0, 0, 262142, 0, 0, 196606, 0, 0, 131070, 0, 0, 262143, 0, 0, 196607, 0, 0, 131071, 0, 0, 196608, 0, 0, 131072, 0, 0, 65536, 0, 0, 0, 0, 0, -65536, 0, 0, -131072, 0, 0, -196608, 0, 0, -131073, 0, 0, -65537, 0, 0, -1, 0, 0, -2, 0, 0, -65538, 0, 0, -131074, 0, 0, -131075, 0, 0, -65539, 0, 0, -3, 0, 0, 65533, 0, 0, 65534, 0, 0, 65535, 0, 0)

[node name="AttackButton" type="Button" parent="UI"]
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = -743.0
offset_top = 210.0
offset_right = -443.0
offset_bottom = 290.0
grow_vertical = 2
action_mode = 0
text = "Bow"
metadata/_edit_use_anchors_ = true

[node name="ItemButton" type="Button" parent="UI"]
offset_left = -67.0
offset_top = 210.0
offset_right = 233.0
offset_bottom = 290.0
action_mode = 0
text = "Item
"
metadata/_edit_use_anchors_ = true

[node name="RunButton" type="Button" parent="UI"]
offset_left = 604.0
offset_top = 210.0
offset_right = 904.0
offset_bottom = 290.0
action_mode = 0
text = "Run
"
metadata/_edit_use_anchors_ = true

[node name="RangeButton" type="Button" parent="UI"]
offset_left = -82.0
offset_top = 208.0
offset_right = 268.0
offset_bottom = 296.0
text = "Range"

[node name="Cursor" type="Node2D" parent="UI"]
position = Vector2(-589, 154)

[node name="Sprite2D" type="Sprite2D" parent="UI/Cursor"]
scale = Vector2(0.5, 0.5)
texture = ExtResource("2_ix46s")

[node name="Camera2D" type="Camera2D" parent="."]

[node name="Weapons" type="Node2D" parent="."]
position = Vector2(0, 172)
rotation = 1.57079

[node name="Melee" type="Node2D" parent="Weapons"]

[node name="Range" type="Node2D" parent="Weapons"]

[node name="User" type="Node2D" parent="."]

[node name="Player" type="Node2D" parent="User"]
position = Vector2(-2, 120)
rotation = 1.57079
script = ExtResource("4_jgo8f")

[node name="MainSprite" type="Sprite2D" parent="User/Player"]
texture = ExtResource("1_rix20")

[node name="AttackData" type="Node2D" parent="User/Player"]

[node name="TileMap" type="TileMap" parent="User/Player"]
position = Vector2(66.0001, -63.9999)
scale = Vector2(8, 8)
tile_set = SubResource("TileSet_tyswo")
format = 2

[node name="PlayerPhase" type="Node2D" parent="User"]
position = Vector2(-140, -31)
script = ExtResource("8_frq5w")

[node name="Enemy Sprite Holder" type="Node2D" parent="User/PlayerPhase"]
visible = false
position = Vector2(137, -233)

[node name="BackGround" type="Sprite2D" parent="User/PlayerPhase/Enemy Sprite Holder"]
position = Vector2(0, -2.00001)
scale = Vector2(12.7656, 3.53125)
texture = ExtResource("2_ix46s")

[node name="EnemySprite" type="Sprite2D" parent="User/PlayerPhase/Enemy Sprite Holder"]
scale = Vector2(2.28125, 1.98438)
texture = ExtResource("1_rix20")

[node name="Player Sprite Holder" type="Node2D" parent="User/PlayerPhase"]
visible = false
position = Vector2(-431, 75)

[node name="PlayerSprite" type="Sprite2D" parent="User/PlayerPhase/Player Sprite Holder"]
scale = Vector2(2.60938, 2.54688)
texture = ExtResource("1_rix20")

[node name="AttackBox" type="Node2D" parent="User/PlayerPhase"]
visible = false
position = Vector2(-51, 43)

[node name="BoxSprite" type="Sprite2D" parent="User/PlayerPhase/AttackBox"]
position = Vector2(189, 301)
scale = Vector2(12.9063, 2.0625)
texture = ExtResource("6_6iyy6")

[node name="ArrowSprites" type="Node2D" parent="User/PlayerPhase"]
visible = false

[node name="Sprite0" type="Sprite2D" parent="User/PlayerPhase/ArrowSprites"]
position = Vector2(-2340, 1)
texture = ExtResource("1_rix20")

[node name="Sprite1" type="Sprite2D" parent="User/PlayerPhase/ArrowSprites"]
position = Vector2(-2113, 0)
texture = ExtResource("1_rix20")

[node name="Sprite2" type="Sprite2D" parent="User/PlayerPhase/ArrowSprites"]
position = Vector2(-1814, 6)
texture = ExtResource("1_rix20")

[node name="Sprite3" type="Sprite2D" parent="User/PlayerPhase/ArrowSprites"]
position = Vector2(-1504, 24)
texture = ExtResource("1_rix20")

[node name="Aiming" type="Node2D" parent="User/PlayerPhase"]
position = Vector2(138, 11)

[node name="CharacterBody2D" type="CharacterBody2D" parent="User/PlayerPhase/Aiming"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="User/PlayerPhase/Aiming/CharacterBody2D"]
position = Vector2(-0.5, -1.5)
shape = SubResource("RectangleShape2D_y4u1u")

[node name="Area2D" type="Area2D" parent="User/PlayerPhase/Aiming/CharacterBody2D"]
script = ExtResource("9_qufre")

[node name="CollisionShape2D" type="CollisionShape2D" parent="User/PlayerPhase/Aiming/CharacterBody2D/Area2D"]
position = Vector2(-1, -3.5)
shape = SubResource("RectangleShape2D_ueekk")

[node name="AimBox" type="Sprite2D" parent="User/PlayerPhase/Aiming"]
texture = ExtResource("6_6iyy6")

[connection signal="range_attack" from="UI" to="User/PlayerPhase" method="_on_ui_range_attack"]
[connection signal="pressed" from="UI/AttackButton" to="UI" method="_on_attack_button_pressed"]
[connection signal="pressed" from="UI/ItemButton" to="UI" method="_on_item_button_pressed"]
[connection signal="pressed" from="UI/RunButton" to="UI" method="_on_run_button_pressed"]
[connection signal="pressed" from="UI/RangeButton" to="UI" method="_on_range_pressed"]
[connection signal="player_attack" from="User/PlayerPhase" to="UI" method="_on_range_pressed"]
[connection signal="body_entered" from="User/PlayerPhase/Aiming/CharacterBody2D/Area2D" to="User/PlayerPhase/Aiming/CharacterBody2D/Area2D" method="_on_body_entered"]
